<html>
<!--  Template for calling Simulator with model -->
<!--  Place in webpage where appropriate        -->

<script type="text/javascript">
 async function runModelName(newFrame) { // Replace 'runModelName' with 'runYourModelName'
// ******************************************
// **** Simulation info to fill out: ********
  const modelURL = 'https://bio.libretexts.org/@api/deki/files/12345/modelFileName.xml'; // Location of sbml model file on libreTexts
  const newRT = '10';       // Length of run in model time units
  const newSS = '0.10';     // integrator step size, total pts = newRt/newSS, 100 points: (10/0.10)
  const staticRun = 'true'; // Display after all calculations are done.
  const parSliders = 'k1, p_3, comp1';// Parameter and species sliders (12 max), exact id match, '' for first up to 8 params and 4 species of model.
  const spPlot = 'S1, deS2, Oxy2';    // Species to plot, exact id match, '' for first up to 8 species.
  const yLabel = 'conc (uM)'; // Plot label, displayed at bottom as: yLabel vs. xLabel
  const xLabel = 'sec';
// *** END of Simulation info to fill out ***
// ******************************************
//
// Simulator location (adjust as needed):
   const simURL = "https://sys-bio.github.io/miniSidewinder/libretexts/libreTextsLoadSim.html";
// ******************************************
   const btnName = 'btn' + newFrame;
   document.getElementById(btnName).disabled = true;
   try {
      para = new URLSearchParams();
	  para.append('m_URL', modelURL);
	  para.append('m_RT', newRT);
	  para.append('m_SS', newSS);
	  para.append('m_static', staticRun);
	  para.append('m_species', spPlot);
	  para.append('m_pars', parSliders);
	  para.append('m_yLabel', yLabel);
	  para.append('m_xLabel', xLabel);
	  // Note: URL + Param search string char limit ~ 2k
      try { document.getElementById(newFrame).src = simURL + '?' + para.toString(); } // Sim page to put in iFrame.
	  catch(err) { let errMsg = 'newFrame: ' + newFrame + ', does not match iframe id! ' + err; alert(errMsg); }
	}
	catch(err) { console.log('Issue setting simulation parameters: ', err); }
  return;
 } 
 </script>
 
<!-- *************************************************************************************************************** -->
<!-- HTML code below: 'button' to launch simulator, 'section' to label it interactive, and 'iframe' to hold simulator page -->
<!-- Replace all 'ModelName' labels with yourModelName (no spaces).  -->
<p><input id="btnModelName" onclick="runModelName('ModelName');" type="button" value="Load Model Name" /></p>
<section class="box-interactive">
<h5 class="box-legend"><span class="lt-icon-default">Interactive Element</span></h5>
<p class="mt-align-center"><iframe align="middle" height="600px" id="ModelName" width="80%"></iframe></p>
</section>

<!-- **** END of Simulator Template *** -->

</html>
